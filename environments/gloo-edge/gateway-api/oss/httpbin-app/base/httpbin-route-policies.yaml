apiVersion: gateway.solo.io/v1
kind: RouteOption
metadata:
  name: httpbin-route-policies
  namespace: httpbin
spec:
  options:
    headerManipulation:
      # add headers to all responses
      requestHeadersToAdd:
        - header:
            key: "foo"
            value: "bar"
        - header:
            key: "x-id"
            value: "12345"
    transformations:
      responseTransformation:
        transformationTemplate:
          body:
            text: '{% if header(":status") == "429" %}<html><body style="background-color:powderblue;"><h1>Too
              many Requests!</h1><p>Try again after 10 seconds</p></body></html>{%
              else %}{{ body() }}{% endif %}'
          parseBodyBehavior: DontParse