apiVersion: networking.gloo.solo.io/v2
kind: RouteTable
metadata:
  name: homer-howto
  namespace: homer-portal
  labels:
    homer: howto
spec:
  http:
    - name: howto-ui
      matchers:
      - uri:
          exact: /howto/ui
      directResponse:
        body: |
          Gloo Mesh UI Walkthrough:
          - Review registered clusters
          - Review discovered Istio resources
          - Review Workspace concepts
            - Grouping of clusters/namespaces
            - Discovered services
            - Import/export relationships between workspaces
            - Workspace options (federation, service isolation, trimProxyConfig)
          - Review Virtual Gateway concepts
          - Review APIs tab (discovered Portal APIs and GraphQL APIs)
          - Review Portals tab 
          - Review Gloo Platform Policies
            - Access
            - Access Log
            - Active Health Check
            - Client TLS
            - Connection
            - CORS
            - CSRF
            - Data Loss Prevention
            - Ext Auth
            - Failover
            - Fault Injection
            - GraphQL Allowed Query
            - GraphQL Persisted Query Cache
            - Header Manipulation
            - HTTP Buffer
            - JWT
            - Listener Connection
            - Load Balancer
            - Mirror
            - Outlier Detection
            - Proxy Protocol
            - Rate Limit
            - Retry Timeout
            - Transformation
            - Trim Proxy Config
            - WAF
            - WASM Deployment
          - Review Debug tab 
        status: 200
    - name: howto-admin
      matchers:
      - uri:
          exact: /howto/admin
      directResponse:
        body: |
          Admin Applications Walkthrough:

          Uptime Dashboard:
          Description: A self-hosted monitoring tool for applications running on glooplatform.com
          - Login through Google Auth to access the Uptime Dashboard 
          - View/Update the list of applications to monitor

          Prometheus:
          Description: Access to the Prometheus UI for querying metrics
          - Login through Google Auth to access the Prometheus UI
          - Provide a query to view metrics coming from the OTEL pipeline such as `istio_requests_total`

          Argo CD:
          Description: Access to the Argo CD UI for managing GitOps deployments
          - Login through Google Auth to access the Argo CD UI
          - Useful to view/edit apps that are synced with the aoa-catalog github repo
          - Useful for viewing deployment configuration / logs / errors when troubleshooting
          - Ability to turn on/off automatic sync of apps

          Grafana:
          Description: Access to the Grafana UI for viewing dashboards
          - Login through Google Auth to access the Argo CD UI
          - View dashboards for Gloo Platform Operations, Kubernetes Cluster, Istio, and Gloo Portal 
        status: 200
    - name: howto-main
      matchers:
      - uri:
          prefix: /howto
      forwardTo:
        destinations:
          - ref:
              name: homer-portal-howto
              namespace: homer-portal
            port:
              number: 8080