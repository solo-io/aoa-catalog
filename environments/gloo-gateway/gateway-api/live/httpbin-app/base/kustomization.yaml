# kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# list of resources to be Applied
resources:
- httpbin-active.yaml
- httpbin-preview.yaml
- httpbin-ns.yaml
#- httpbin-all-in-one-route.yaml
- httpbin-parent-route.yaml
- httpbin-delegate-route.yaml
- httpbin-route-policies.yaml
- httpbin-ratelimit-config.yaml
- okta-authconfig.yaml
- external-service
- direct-response
- fault-injection
- httpbin-ext-auth-routeoption.yaml
- httpbin-get-route.yaml

# when using ambient uncomment below
transformers:
- transformers/ambient-label-transformer.yaml

# patch nodeSelector and tolerations on all Deployments
patches:
- patch: |-
    kind: not-important
    metadata:
      name: not-important
    spec:
      template:
        spec:
          nodeSelector:
            node: "spot"
          tolerations:
          - key: cloud.google.com/node
            operator: Equal
            value: "spot"
            effect: NoSchedule
  target:
    kind: Deployment