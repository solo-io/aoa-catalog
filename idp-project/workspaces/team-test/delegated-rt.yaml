apiVersion: networking.gloo.solo.io/v2
kind: RouteTable
metadata:
  name: idp-project-main
  namespace: idp-project-config
spec:
  hosts:
    - 'idp-project.glooplatform.com'
  virtualGateways:
    - name: north-south-gw
      namespace: istio-gateways
      cluster: mgmt
  http:
   - delegate:
      routeTables:
        - name: idp-project-v1-httpbin-delegate
---
apiVersion: networking.gloo.solo.io/v2
kind: RouteTable
metadata:
  name: idp-project-v1-httpbin-delegate
  namespace: idp-project-config
spec:
  http:
  - name: idp-project-v1-httpbin-delegate
    matchers:
    - uri:
        prefix: /
    forwardTo:
      pathRewrite: /
      destinations:
      - ref:
          name: httpbin
          namespace: idp-project-config
        kind: VIRTUAL_DESTINATION
        port:
          number: 80